# Laser Cross Detection

## Overview and Core Utilities
This repository contains code to accurately detect the intersection point of two light beams in 2d images. The module can be used in combination with volumetric camera calibration based on the laser cross target method developed by [Hardege et al.](https://doi.org/10.1007/s00348-023-03729-1). An example of the problem is shown below:

![](readme-figures/example_image.png)

The package provides a core module `laser_cross_detection.core` with five different methods to detect the point of intersection:

- RANSAC
- Probabilistic Hough Transform
- Template Matching (currently under construction)
- Kluwe (new implementation by the authors)
- Gunady (beam fitting method described by [Gunady et al. 2024](https://doi.org/10.1088/1361-6501/ad574d))

The example image can be generated by executing

```bash
python example.py
```
The corresponding output is

```bash
Created test image with intersection point at (659.7976, 502.9095)
Testing Methods...

        kluwe              - (659.8237, 502.9553) - error: 0.0527 pixel - took 2.7221 ms
        ransac             - (659.1877, 501.4849) - error: 1.5497 pixel - took 0.1284 ms
        hough              - (658.9932, 502.9253) - error: 0.8046 pixel - took 0.0551 ms
        gunady             - (660.0721, 503.1893) - error: 0.3919 pixel - took 4.0414 ms
        template_matching  - (660.2976, 503.4095) - error: 0.7071 pixel - took 0.1487 ms

Done
```
which allows a comparison between the actual point of intersection and the detected one.

## Testing
The repository provides a testing module `laser_cross_detection.test` which can be used to create synthetic images, like the one shown above. Images can be created with or without noise. The beams can be freely positioned in the image using and angle $\theta$ and radius from the image center $\rho$. Using these parameter the point of intersection can be calculated mathematically and compared to the predictions of the detection methods.

The noise in the images is created by masking the beams by Perlin noise, adding Perlin noise, adding Salt and Paper noise and by adding Gaussian noise to the Gaussian Intensity Distribution of the beams.

## Calibration
To make use of the detections a calibration module `laser_cross_detection.calibration` exists. It supports linear calibration (Direct Linear Transform - DLT, adapted from [github.com/JD-Canada/Tracker3D](https://github.com/JD-Canada/Tracker3D)) and polynomial calibration using Soloff Polynomials ([Soloff et al. (1997)](https://doi.org/10.1088/0957-0233/8/12/008)). Both approaches support multi camera setups.
